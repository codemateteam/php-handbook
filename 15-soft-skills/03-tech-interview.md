# 15.3 Техническое собеседование

## Что это

**Типы собеседований:**

```
1. HR screening (15-30мин)
   - О тебе, опыт, мотивация

2. Technical interview (1-2ч)
   - Теория, практика, алгоритмы

3. Coding challenge / Live coding
   - Решение задач в реальном времени

4. System design (для Senior+)
   - Проектирование архитектуры

5. Cultural fit
   - Подходишь ли в команду
```

---

## Подготовка

**Что повторить:**

```
✓ PHP основы (типы, ООП, namespace, PSR)
✓ Laravel (routing, middleware, Eloquent, events, jobs)
✓ SQL (JOIN, индексы, оптимизация)
✓ Алгоритмы (сортировка, поиск, рекурсия)
✓ Структуры данных (массивы, стеки, очереди)
✓ Паттерны (Repository, Factory, Observer)
✓ Git (branching, merge, rebase, конфликты)
✓ Testing (Unit, Feature, TDD)
✓ Безопасность (XSS, SQL injection, CSRF)
✓ Performance (кеширование, N+1, индексы)
```

**Проекты:**

```
✓ Подготовь 2-3 проекта для обсуждения
✓ Знай архитектуру своих проектов
✓ Помни сложности и как их решал
✓ Будь готов показать код на GitHub
```

---

## Типичные вопросы

**О тебе:**

```
"Расскажи о себе"
✅ Хороший ответ:
"Я PHP/Laravel разработчик с 2 годами опыта.
Работал над e-commerce проектом с 100k пользователей.
Занимался оптимизацией производительности, добавлял
новые функции, писал тесты. Интересуюсь архитектурой
и чистым кодом. Недавно изучал Event Sourcing и DDD."

❌ Плохой ответ:
"Я учился в университете, потом работал... эээ...
ну, на разных проектах. Laravel знаю хорошо."
```

**Почему хочешь сменить работу:**

```
✅ Хорошо:
"Хочу работать над более сложными задачами
и развиваться в архитектуре"
"Интересен ваш продукт и технологический стек"

❌ Плохо:
"Маленькая зарплата"
"Плохая команда"
"Много legacy кода"
```

---

## Технические вопросы

**PHP:**

```php
Q: "В чём разница между == и ===?"
A: "== сравнивает значения с приведением типов,
=== сравнивает значения и типы.
Пример: '5' == 5 (true), '5' === 5 (false)"

Q: "Что такое PSR?"
A: "PHP Standards Recommendations. Стандарты для:
- PSR-1, PSR-12: Code Style
- PSR-4: Autoloading
- PSR-7: HTTP message interfaces"

Q: "Что такое namespace?"
A: "Изоляция классов. Позволяет избежать конфликтов имён:
namespace App\Services;
class UserService {}"
```

**Laravel:**

```php
Q: "Что такое Service Container?"
A: "DI контейнер для управления зависимостями.
Автоматически инъектирует зависимости через type-hinting:
public function __construct(UserRepository $repo)"

Q: "В чём разница между Facade и DI?"
A: "Facade — статический прокси к классу в контейнере.
DI — инъекция зависимости через конструктор.
DI лучше для тестирования, так как можно mock."

Q: "Что такое N+1 проблема?"
A: "Запрос для списка + N запросов для связей.
Решение: eager loading через with()"
```

**SQL:**

```sql
Q: "В чём разница между INNER JOIN и LEFT JOIN?"
A: "INNER JOIN возвращает только совпадения.
LEFT JOIN возвращает все строки из левой таблицы
+ совпадения из правой (или NULL)"

Q: "Зачем нужны индексы?"
A: "Ускоряют поиск в WHERE, ORDER BY, JOIN.
Но замедляют INSERT/UPDATE/DELETE.
Нужны на foreign keys, часто фильтруемых колонках"
```

---

## Live Coding

**Типичные задачи:**

**1. FizzBuzz:**

```php
// Вывести числа 1-100
// Кратные 3: Fizz
// Кратные 5: Buzz
// Кратные 3 и 5: FizzBuzz

function fizzBuzz(int $n): array
{
    $result = [];

    for ($i = 1; $i <= $n; $i++) {
        if ($i % 15 === 0) {
            $result[] = 'FizzBuzz';
        } elseif ($i % 3 === 0) {
            $result[] = 'Fizz';
        } elseif ($i % 5 === 0) {
            $result[] = 'Buzz';
        } else {
            $result[] = (string) $i;
        }
    }

    return $result;
}
```

**2. Палиндром:**

```php
function isPalindrome(string $str): bool
{
    $str = strtolower(preg_replace('/[^a-z0-9]/i', '', $str));
    return $str === strrev($str);
}

// Тесты
isPalindrome('A man a plan a canal Panama'); // true
isPalindrome('hello'); // false
```

**3. Массивы:**

```php
// Найти дубликаты
function findDuplicates(array $arr): array
{
    $counts = array_count_values($arr);
    return array_keys(array_filter($counts, fn($c) => $c > 1));
}

// Убрать дубликаты (сохранить порядок)
function unique(array $arr): array
{
    return array_values(array_unique($arr));
}

// Пересечение массивов
function intersection(array $a, array $b): array
{
    return array_values(array_intersect($a, $b));
}
```

**4. Laravel задачи:**

```php
// Найти users с > 10 заказами за последний месяц
User::has('orders', '>', 10)
    ->whereHas('orders', function ($q) {
        $q->where('created_at', '>=', now()->subMonth());
    })
    ->get();

// Топ 5 самых продаваемых продуктов
Product::withCount('orderItems')
    ->orderBy('order_items_count', 'desc')
    ->limit(5)
    ->get();
```

---

## Советы для Live Coding

**Процесс:**

```
1. Уточни задачу
   "Нужно учитывать регистр?"
   "Строка только латиница?"

2. Обсуди подход
   "Можно решить через массив или regex.
    Предлагаю использовать..."

3. Напиши решение
   Проговаривай вслух что делаешь

4. Протестируй
   "Проверим edge cases: пустая строка, null..."

5. Оптимизируй (если есть время)
   "Можно улучшить сложность с O(n²) до O(n)"
```

**Что делать если застрял:**

```
✓ Проговори проблему вслух
✓ Попроси hint
✓ Начни с простого решения (brute force)
✓ Можно использовать Google / документацию (если разрешено)
```

---

## System Design (для Middle+/Senior)

**Типичная задача:**

```
"Спроектируй систему для Twitter-like приложения"

1. Уточни требования
   - Сколько пользователей?
   - QPS (queries per second)?
   - Функции: tweets, likes, follows?

2. High-level архитектура
   Users → Load Balancer → App Servers → Database

3. Database schema
   users: id, username, email
   tweets: id, user_id, content, created_at
   follows: follower_id, following_id

4. API endpoints
   POST /tweets
   GET /tweets/{id}
   GET /timeline (feed)

5. Scaling
   - Кеширование timeline в Redis
   - Read replicas для БД
   - CDN для media
   - Queue для асинхронных задач
```

---

## Поведенческие вопросы

**STAR метод:**

```
Situation: Ситуация
Task: Задача
Action: Действие
Result: Результат
```

**Примеры:**

```
Q: "Расскажи про сложную техническую проблему"

A: (STAR)
S: "В проекте e-commerce были медленные запросы (5+ сек)"
T: "Нужно было оптимизировать до < 1 сек"
A: "Нашёл N+1 проблему через Laravel Debugbar,
    добавил eager loading, создал индексы на БД"
R: "Время запроса сократилось до 200ms,
    пользователи перестали жаловаться на медленную работу"

Q: "Конфликт в команде?"

A: (STAR)
S: "Разногласия с коллегой о подходе к рефакторингу"
T: "Нужно было прийти к решению"
A: "Обсудили оба подхода, сделали POC обоих вариантов,
    протестировали производительность"
R: "Выбрали оптимальное решение на основе данных,
    оба были довольны результатом"
```

---

## Вопросы работодателю

**Хорошие вопросы:**

```
О проекте:
- Какой технический стек используется?
- Какая архитектура приложения?
- Размер команды разработки?
- Как организован процесс разработки? (Agile/Scrum?)

О Code Quality:
- Проводите Code Review?
- Покрытие тестами?
- CI/CD есть?

О развитии:
- Есть ли менторинг для Junior?
- Обучение за счёт компании?
- Возможность роста?

О команде:
- С кем буду работать?
- Как принимаются технические решения?
```

---

## Красные флаги

**От работодателя:**

```
❌ "У нас нет времени на тесты"
❌ "Code review? Это замедляет разработку"
❌ "Работаем в основном на выходных"
❌ "Legacy код, но мы его не трогаем"
❌ "Документации нет, спрашивай Васю"
❌ Агрессивные или высокомерные интервьюеры
```

---

## На собеседовании скажешь

> "Техническое собеседование проверяет теорию (PHP, Laravel, SQL), практику (live coding), архитектуру (system design для Senior). Подготовка: повторить основы, алгоритмы, паттерны, проекты. Live coding: уточнить задачу, обсудить подход, протестировать. Поведенческие вопросы: STAR метод (Situation, Task, Action, Result). Вопросы работодателю: стек, процесс, развитие, команда. Красные флаги: нет тестов, code review, work-life balance."

